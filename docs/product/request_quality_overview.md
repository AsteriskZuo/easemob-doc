# 请求质量概览

<Toc />

**请求质量概览** 模块提供质量数据的阶段性分析，帮助你掌握用量变化趋势、跟踪产品质量情况：

- 自动采集、处理和存储多个用量和质量指标的数据，数据延时为 1 小时。

- 支持查看终端 SDK API 和服务器端 RESTful API 调用的请求次数、请求成功率和平均时延等。

## 请求质量监控

![img](@static/images/console/requestmonitor/terminalsum.png)

### 终端数据

**终端数据** 页面展示终端 SDK API 的请求次数、请求成功率和平均时延数据。

#### 指标类型

![img](@static/images/console/requestmonitor/terminalindextype.png)

| 指标类型  | 描述  |
| :----------- | :-------------------------------- |
|手动登录 |客户端用户通过用户ID、密码或者 token 登录。|
|自动登录 |客户端对于已登录过的账户，直接采用默认账户登录。|
|发送消息 |客户端发送的消息的统计。|
|好友管理 |客户端加好友、删除好友等好友相关操作。|
|用户管理 |客户端创建用户、更新用户信息等用户管理操作。|
|群组管理 |客户端创建群组、解散群组等群组管理操作。|
|聊天室管理 |客户端创建聊天室、解散聊天室等群组管理操作。|

#### 指标

![](@static/images/console/requestmonitor/terminalindex.png)

|指标|描述|
| :----------- | :-------------------------------- |
|请求次数|客户端 SDK API 的总请求次数。|
|1s/3s/5s 请求成功率|客户端 SDK API 在 1s/3s/5s 成功的请求次数 ÷ 总有效请求次数 × 100%。|
|平均时延|客户端 SDK API 请求的总延时 ÷ 总请求次数。|

总有效请求次数不包含客户端操作失误的次数。操作失误具体指以下情况：
- 用户名或密码为空或错误。
- 用户名不合法。
- 密码无效。
- 不具备操作权限，需要应用程序管理员许可。
- 用户不存在。
- 群组不存在。
- 用户不在群组中。

为了更直观的呈现数据，不同指标采用了不同的图表形式，具体说明如下：

|指标|左侧地图|右侧图|交互说明|
| :------- | :----- | :------------------------ | :------- |
|请求次数|请求次数越高，该区域的颜色越深。|折线图。|首次进入页面时，右侧时序图默认展示左侧地图上所有区域的指标数据之和。在左侧地图单击某一区域后，右侧时序图会更新为该区域的指标数据。|
|1s/3s/5s 请求成功率|请求次数越高，该区域的颜色越深。 气泡直径越大，该区域的请求成功率越低。|折线图。| |
|平均时延|请求次数越高，该区域的颜色越深。气泡直径越大，该区域的平均时延越高。|热力图，其中横坐标为时间，纵坐标为时延分桶。方块颜色越深，对应时间范围内的请求次数越高。|  |

### Server API 数据

**Server API 数据** 页面以折线图展示服务器端 RESTful API 接口调用的请求次数、请求成功率和平均时延数据。

Server API 数据包含了一部分 SDK 对 RESTful API 接口的调用。例如，SDK 端的群组操作通过 RESTful API 调用，因此也统计在 Server API 数据中。

![](@static/images/console/requestmonitor/serverapidata.png)

#### 指标类型
![](@static/images/console/requestmonitor/serverapiindexdata.png)

|指标类型|描述|
| :----------- | :-------------------------------- |
|获取 token|通过 RESTful API 实现获取管理员权限 token 的功能。|
|用户体系集成|通过 RESTful API 实现用户的注册、获取、修改、删除等管理功能。|
|文件上传下载|通过 RESTful API 实现语音和图片等文件的上传和下载功能。|
|发送消息|通过 RESTful API 实现发送消息功能。|
|群组管理|通过 RESTful API 实现群组创建、删除等管理功能。|
|聊天室管理|通过 RESTful API 实现聊天室创建、删除等管理功能。|
|用户属性|通过 RESTful API 实现用户属性设置、删除等管理功能。|

#### 指标

![](@static/images/console/requestmonitor/serverapiindex.png)

|指标|说明|
| :----------- | :-------------------------------- |
|请求次数|服务器端 RESTful API 的总请求次数。|
|1s/3s/5s 请求成功率|服务器端 RESTful API 在 1s/3s/5s 成功的请求次数 ÷ 总请求次数 × 100%。|
|平均时延|服务器端 RESTful API 请求的总延时 ÷ 总请求次数。|

为了更直观的呈现数据，不同指标采用了不同的图表形式，具体说明如下：

|指标|图|
| :----------- | :-------------------------------- |
|请求次数|折线图。|
|1s/3s/5s 请求成功率|折线图。|
|平均时延|热力图，其中横坐标为时间，纵坐标为时延分桶。方块颜色越深，对应时间范围内的请求次数越高。|

